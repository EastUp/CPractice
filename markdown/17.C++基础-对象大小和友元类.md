# <center>17.对象大小和友元类<center>
@[TOC](C++基础)

# 知识点：

## 1. 可变参数

java中：`int ...`  
c++：`...`

```c++
void sum(int count,...){// java：int ..., c++： ...
    va_list vp;
    // 可变参数开始方法， count 代表从哪里开始
    va_start(vp,count);

    int number = va_arg(vp,int);
    cout << number <<endl;

    // 读取下一个
    number = va_arg(vp,int);
    cout << number <<endl;

    // 读取下一个，超出了默认是 0
    number = va_arg(vp,int);
    cout << number <<endl;
}
```


## 2. static 关键字
总结：
1. 静态的属性必须要初始化 （实现） `int Student::tag = 12;`
2. 静态 可以直接用类名去操作 ::   `Student::tag += 12;`
3. 静态的方法只能去操作静态的属性或者方法

```c++
	static void change(){
		tag += 12;
	}
```



## 3. 对象大小

1. 对象的大小与结构体的计算方式类似
2. static 静态变量和方法并没有算到类的大小中
3. 栈，堆，全局（静态，常量，字符串），代码区 ，类的大小只与普通属性有关系



## 4. this 指针

`this 指针：代表当前的对象，因为类的方法放在代码区，大家一起共享的，所以要有 this 做区分`


## 5.const 修饰函数

`const 在 () 之后主要用来限制 this 关键字`,`this` 的值和地址都不能修改

```c++
    // this = const Student* const this
    // 第一个 const : 常量指针， 代表值不能修改
    // 第二个 const : 指针常量，代表指针的地址不能修改
    void change() const { // const 在 () 之后主要用来限制 this 关键字
        // this->age + = 12;
        // this = (Student)0x0012;
    }
```

## 6.友元函数

作用：`友元函数是可以在外部访问其私有属性的`

```c++
class Person
{
 private:
	 int age = 0;

public:
	// 如果有自己写构造函数，那么会默认覆盖无参的构造函数
	Person(int age){
		this->age = age;
	}
	// 友元函数的声明
	friend void friend_change(Person *person, int age);
};

// 友元函数的实现
void friend_change(Person *person, int age){
	// 修改一下 age 的值
	// 在类的内部才能访问私有属性
	// 如果该方法声明成友元函数那么是可以在外部访问其私有属性的
	person->age = age;
}
```

注意：调用的时候`不`使用 `类名::`


### 6.1 友元函数与普通函数的区别

- 友元函数：直接`方法名`调用。
- 普通函数：需要`对象名::`+`方法名` 调用

## 7.友元类

作用：`友元类是可以在访问其附属类的私有属性`

```c++
class  ImageView
{
public: // B 是 A 的友元类
	friend class Class;
private:
	int a;
};

class Class
{
public:
	ImageView aObj;

	void changeA(int number){
		aObj.a = number;
	}

	int getA(){
		return aObj.a;
	}
};
```












