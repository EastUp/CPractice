# <center>89.FFmpeg-OpenGL朋友圈录制视频<center>

具体代码请看：**[NDKPractice项目的ffmpeg88livepush](https://github.com/EastUp/NDKPractice/tree/master/ffmpeg88livepush)**

# 知识点：

## 1.OpenGL渲染流程介绍
怎么渲染一张图片：

1. 继承`GLSurfaceView`
2. 继承`GLSurfaceView.Renderer`
3. 写顶点和纹理渲染的代码
4. 编译链接生成程序
5. 生成加载 bitmap 的纹理
6. 绘制到屏幕



介绍一下纹理坐标系：![](../pic/89.纹理坐标系.png)

```java
    /**
     * 顶点坐标
     */
    private float[] mVertexCoordinate = new float[]{
            -1f, -1f, // 左下角
            1f, -1f,  // 右下角
            -1f, 1f,  // 左上角
            1f, 1f    // 右上角
    };
    private FloatBuffer mVertexBuffer;

    /**
     * 纹理坐标(对应全屏)
     */
    private float[] mFragmentCoordinate = new float[]{
            0f, 1f,
            1f, 1f,
            0f, 0f,
            1f, 0f
    };

    /**
     * 纹理坐标(对应半屏)
     */
    private float[] mFragmentCoordinate = new float[]{
            0f, 0.5f,
            1f, 0.5f,
            0f, 0f,
            1f, 0f
    };
```

右边是OpenGL的渲染流程：
![](../pic/89.OpenGL%20的渲染原理.png)


## 2.OpenGL渲染摄像头数据

具体代码请看：**[NDKPractice项目的ffmpeg88livepush](https://github.com/EastUp/NDKPractice/tree/master/ffmpeg88livepush)**、


## 3.视频编码录制

具体代码请看：**[NDKPractice项目的ffmpeg88livepush](https://github.com/EastUp/NDKPractice/tree/master/ffmpeg88livepush)**、